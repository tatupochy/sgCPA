<div class="table-container">
    <div class="table">
        <table class="table table-bordered" id="table">
            <thead class="fixed-head">
                <tr>
                    <th>
                        Acciones
                    </th>
                    <th>Nombre</th>
                    <th>Apellido</th>
                    <th>Email</th>
                    <th>Fecha de Nacimiento</th>
                    <th>Número de Cédula</th>
                    <th>Teléfono</th>
                    <th>Ciudad</th>
                    <th>Teléfono del Padre</th>
                    <th>Teléfono de la Madre</th>
                </tr>
            </thead>
            <tbody id="tbody" class="scrollable-body">
                {% for student in entity %}
                <tr id={{student.id}}>
                    <td class="acciones-container">
                        <div class="acciones">
                            <button class="btn btn-primary editar" data-id={{student.id}}>
                                <i class="fa-solid fa-pencil editar" data-id={{student.id}}></i>
                            </button>
                            <button data-id={{student.id}} type="button" class="btn btn-danger" data-bs-toggle="modal"
                                data-bs-target="#staticBackdrop">
                                <i class="fa-solid fa-trash-can"></i>
                            </button>
                        </div>
                    </td>
                    <td>{{ student.name }}</td>
                    <td>{{ student.lastName }}</td>
                    <td>{{ student.email }}</td>
                    <td>{{ student.birthDate|date:"d/m/Y" }}</td>
                    <td>{{ student.ciNumber }}</td>
                    <td>{{ student.phone }}</td>
                    <td>{{ student.city.name }}</td>
                    <td>{{ student.fatherPhone }}</td>
                    <td>{{ student.motherPhone }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <div>
            {% include '../pagination.html' %}
        </div>
    </div>
</div>

<!-- Include DataTables scripts and initialize the table -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.6.2/css/buttons.dataTables.min.css">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.6.2/js/dataTables.buttons.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.print.min.js"></script>
<script>
$(document).ready(function() {
    $('#table').DataTable({
        dom: 'Bfrtip',
        searching: false,  // Deshabilitar la funcionalidad de búsqueda
        buttons: [
            'copy', 'excel', 'csv',
            {
                extend: 'pdfHtml5',
                text: 'PDF',
                pageLength: 4, //para que solo se muestren 4 
                title: 'Listado de alumnos',
                filename: function() {
                    var d = new Date();
                    var datestring = d.getFullYear() + "-" + ("0"+(d.getMonth()+1)).slice(-2) + "-" + ("0" + d.getDate()).slice(-2) + "_" + ("0" + d.getHours()).slice(-2) + ("0" + d.getMinutes()).slice(-2);
                    return 'ListadoAlumnos_' + datestring;
                },
                exportOptions: {
                    columns: [1, 2, 5, 6, 7]
                },
                customize: function(doc) {
                    doc.styles.tableHeader.alignment = 'left'; 
                    // Ensure table widths are set
                    if (doc.content[1] && doc.content[1].table && doc.content[1].table.body) {
                        doc.content[1].table.widths = Array(doc.content[1].table.body[0].length + 1).join('*').split('');
                    }
                }
            },
        ],
        language: {
            "lengthMenu": "Mostrar _MENU_ registros por página",
            "zeroRecords": "No se encontraron resultados",
            "info": "Mostrando página _PAGE_ de _PAGES_",
            "infoEmpty": "No hay registros disponibles",
            "infoFiltered": "(filtrado de _MAX_ registros totales)",
            "paginate": {
                "first": "Primero",
                "last": "Último",
                "next": "Siguiente",
                "previous": "Anterior"
            },
            "buttons": {
                "copy": "Copiar",
                "excel": "Excel",
                "csv": "CSV",
                "pdf": "PDF",
                "print": "Imprimir"
            }
        }


    });
});
</script>
